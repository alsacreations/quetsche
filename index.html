<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Quetsche – Compression de photos</title>
    <meta
      name="description"
      content="Outil local de compression et redimensionnement d'images (JPEG, PNG) avec export WebP automatique."
    />
    <link rel="preload" as="style" href="assets/css/app.css" />
    <link rel="stylesheet" href="assets/css/app.css" />
  </head>
  <body data-layout="liquid">
    <header class="header" id="top">
      <h1>Quetsche</h1>
      <p class="tagline">
        Compresse & redimensionne vos images. Simple. Basique.
      </p>
    </header>

    <main class="main" id="main" tabindex="-1">
      <section class="uploader" aria-labelledby="uploader-title">
        <h2 id="uploader-title" class="visually-hidden">Importer une image</h2>
        <div data-layout="duo" data-model="2-1" data-gap="m">
          <div
            class="field-group dropzone"
            id="dropZone"
            role="button"
            tabindex="0"
            aria-describedby="dropHint"
          >
            <label for="fileInput" class="primary-label"
              >Choisir une image (JPEG ou PNG)</label
            >
            <input
              id="fileInput"
              name="file"
              type="file"
              accept="image/jpeg,image/png"
              required
            />
            <p class="help" id="dropHint">
              Glissez-déposez un fichier ou cliquez sur le bouton.
            </p>
          </div>
          <div class="field-group resize-panel" id="resizeChoices">
            <div
              class="inline-fields"
              style="align-items: flex-start"
              role="radiogroup"
              aria-labelledby="resizeTitle"
            >
              <div>
                <input
                  type="radio"
                  name="resize"
                  id="size-original"
                  value="original"
                />
                <label for="size-original">Taille d'origine</label>
              </div>
              <div>
                <input
                  type="radio"
                  name="resize"
                  id="size-web"
                  value="1200"
                  checked
                />
                <label for="size-web">Web <i>(conseillé)</i></label>
              </div>
              <div>
                <input type="radio" name="resize" id="size-email" value="800" />
                <label for="size-email">E-mail <i>(très léger)</i></label>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section
        class="results"
        aria-labelledby="results-title"
        hidden
        data-state="idle"
      >
        <h2 id="results-title" class="visually-hidden">Résultats</h2>
        <div id="status" role="status" aria-live="polite" class="status"></div>
        <div class="compare" id="compare" hidden>
          <div
            class="compare-inner"
            id="compareInner"
            data-built="false"
            data-layout="switcher"
            style="--col-min-size: 18rem"
          ></div>
          <section
            class="download-group"
            id="downloadGroup"
            hidden
            aria-labelledby="downloads-title"
          >
            <h3 id="downloads-title">Téléchargements</h3>
            <ul id="downloadList" class="download-list"></ul>
          </section>
          <div class="metrics" id="metrics" hidden>
            <h3>Métriques</h3>
            <ul class="metrics-list" role="list">
              <li>Bits/pixel original : <span id="metricOrigBpp"></span></li>
              <li>Bits/pixel compressé : <span id="metricProcBpp"></span></li>
              <li>Octets économisés : <span id="metricBytesSaved"></span></li>
              <li>
                Réduction CO₂ estimée (transfert) :
                <span id="metricCo2Saved"></span>
              </li>
            </ul>
            <p class="metrics-note">
              Estimation CO₂ (~0,5 g / Mo transféré) source indicative :
              <a
                href="https://www.websitecarbon.com/"
                target="_blank"
                rel="noopener noreferrer"
                >Website Carbon</a
              >. À affiner.
            </p>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <p>
        Compression & redimensionnement côté navigateur (aucun envoi serveur).
        <br />
        Traitement 100% local. Aucune donnée envoyée.
      </p>
    </footer>

    <script type="module" src="assets/js/app.js"></script>
  </body>
</html>
