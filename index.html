<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/images/favicon.svg" />
    <meta name="author" content="Alsacreations" />
    <title>Quetsche – Compression de photos</title>
    <meta
      name="description"
      content="Outil local et basique de compression et redimensionnement d'images (JPEG, PNG)."
    />
    <link rel="preload" as="style" href="assets/css/app.css" />
    <link rel="preload" as="image" href="public/samples/questche_400.webp" />
    <link rel="stylesheet" href="assets/css/app.css" />
  </head>
  <body data-layout="liquid">
    <header class="header" id="top">
      <h1>Quetsche</h1>
      <p class="tagline">Compression d'images. Simple. Basique.</p>
    </header>

    <main class="main" data-layout="boxed" id="main" tabindex="-1">
      <section class="uploader" aria-labelledby="uploader-title">
        <h2 id="uploader-title" class="visually-hidden">Importer une image</h2>
        <section class="drop-section">
          <div
            class="field-group dropzone"
            id="dropZone"
            role="button"
            tabindex="0"
            aria-describedby="dropHint"
          >
            <label for="fileInput" class="primary-label"
              >Choisir une image (JPEG ou PNG)</label
            >
            <input
              id="fileInput"
              name="file"
              type="file"
              accept="image/jpeg,image/png"
              required
            />
            <p class="help" id="dropHint">
              Glissez-déposez un fichier ou cliquez sur le bouton.
            </p>
          </div>

          <div class="sample-suggestion" id="sampleSuggestion">
            <p class="sample-intro">Pas d'image sous la main&#8239;?</p>
            <figure class="sample-figure">
              <picture>
                <source
                  type="image/webp"
                  srcset="public/samples/questche_400.webp"
                />
                <img
                  src="public/samples/questche_400.webp"
                  width="200"
                  alt="Exemple de photo Quetsche"
                  loading="lazy"
                  decoding="async"
                />
              </picture>
              <figcaption>
                <button
                  type="button"
                  class="sample-load"
                  data-full-src="public/samples/questche_1920.jpg"
                  data-file-name="questche_1920.jpg"
                >
                  Tester cet exemple
                </button>
              </figcaption>
            </figure>
          </div>

          <div class="field-group resize-panel" id="resizeChoices">
            <div
              class="inline-fields"
              data-layout="stack"
              style="align-items: flex-start"
              role="radiogroup"
              aria-labelledby="resizeTitle"
            >
              <div>
                <input
                  type="radio"
                  name="resize"
                  id="size-original"
                  value="original"
                />
                <label for="size-original">Taille d'origine</label>
              </div>
              <div>
                <input
                  type="radio"
                  name="resize"
                  id="size-web"
                  value="1200"
                  checked
                />
                <label for="size-web">Web <i>(conseillé)</i></label>
              </div>
              <div>
                <input type="radio" name="resize" id="size-email" value="800" />
                <label for="size-email">E-mail <i>(très léger)</i></label>
              </div>
            </div>
          </div>
        </section>
      </section>

      <section
        class="results"
        aria-labelledby="results-title"
        hidden
        data-state="idle"
      >
        <h2 id="results-title" class="visually-hidden">Résultats</h2>
        <div id="status" role="status" aria-live="polite" class="status"></div>
        <div class="compare" id="compare" hidden>
          <div
            class="compare-inner"
            id="compareInner"
            data-built="false"
            data-layout="switcher"
            style="--col-min-size: 18rem"
          ></div>
          <section
            class="download-group"
            id="downloadGroup"
            hidden
            aria-labelledby="downloads-title"
          >
            <h3 id="downloads-title">Téléchargements</h3>
            <div class="download-wrapper">
              <table id="downloadTable" class="download-table">
                <caption class="visually-hidden">
                  Tableau comparatif des versions téléchargeables (originale,
                  compressée, WebP) avec indication du poids et de la meilleure
                  optimisation.
                </caption>
                <thead>
                  <tr>
                    <th scope="col">Version</th>
                    <th scope="col">Poids</th>
                    <th scope="col">Télécharger</th>
                    <th scope="col">
                      <span class="visually-hidden">Optimisation</span>
                    </th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>
          </section>
          <div class="metrics" id="metrics" hidden>
            <h3>Bilan</h3>
            <ul class="metrics-list" role="list">
              <li>Poids originel : <span id="metricOrigSize"></span></li>
              <li>
                Poids compressé (<span id="metricBestFormat"></span>) :
                <span id="metricBestSize"></span> (<span
                  id="metricBestPct"
                ></span
                >)
              </li>
              <li>Octets économisés : <span id="metricBytesSaved"></span></li>
              <li>Réduction CO₂ estimée : <span id="metricCo2Saved"></span></li>
            </ul>
            <p class="metrics-note">
              Estimation CO₂ (~0,5 g / Mo transféré) source indicative :
              <a
                href="https://www.websitecarbon.com/"
                target="_blank"
                rel="noopener noreferrer"
                >Website Carbon</a
              >. À affiner.
            </p>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer">
      <p>
        Compression & redimensionnement côté navigateur.
        <br />
        Traitement 100% local. Aucune donnée envoyée.
      </p>
      <p>
        <small
          >Source image exemple :
          <a
            href="https://pixabay.com/fr/photos/damons-fin-de-la-saison-prunes-4452658/"
            target="_blank"
            rel="noopener noreferrer"
            >mac231 (Pixabay)</a
          ></small
        >
      </p>
    </footer>

    <script type="module" src="assets/js/app.js"></script>
  </body>
</html>
